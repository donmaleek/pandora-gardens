{{!==============================================================}}
{{!================ PASSWORD RESET EMAIL v3.0 ==================}}
{{!==============================================================}}
{{!-- 
  SECURE PASSWORD RESET COMPONENT
  FEATURES:
  1. Time-sensitive reset link (15min expiry)
  2. IP Address & Device Logging
  3. Non-clickable URL fallback
  4. Dark mode support
  5. Security annotations

  REQUIRED DATA:
  - name: User's first name
  - resetLink: Tokenized reset URL
  - ipAddress: Requester's IP
  - userAgent: Requester's device info
  - timestamp: Request time
  - reportPhishingUrl: Link to report phishing
--}}
<mjml>
  <mj-head>
    <mj-title>Password Reset Request for {{name}}</mj-title>
    <mj-attributes>
      <mj-all font-family="Arial, sans-serif" />
      <mj-text font-size="16px" line-height="1.6" color="#2d3748" />
    </mj-attributes>
    <mj-style inline="inline">
      :root {
        --primary: #4CAF50;
        --text: #2d3748;
        --background: #ffffff;
        --border: #e2e8f0;
        --alert-bg: #fff3cd;
        --alert-border: #ffc107;
        --link: #3182ce;
        --footer-text: #718096;
        --danger: #e53e3e;
      }
      @media (prefers-color-scheme: dark) {
        :root {
          --text: #e2e8f0;
          --background: #1a202c;
          --border: #2d3748;
          --alert-bg: #3d3d00;
          --alert-border: #d4af37;
          --footer-text: #a0aec0;
        }
      }
      .security-alert {
        background-color: var(--alert-bg);
        border-left: 4px solid var(--alert-border);
        padding: 12px;
        margin: 20px 0;
        border-radius: 6px;
      }
      code {
        display: block;
        padding: 10px;
        background-color: var(--border);
        border-radius: 6px;
        word-break: break-word;
        font-size: 14px;
      }
    </mj-style>
  </mj-head>

  <mj-body background-color="var(--background)">
    {{!================= HEADER =================}}
    <mj-section padding="30px 0">
      <mj-column>
        <mj-image src="https://pandoragardens.com/logo-secure.png" 
                  alt="Pandora Gardens Security Shield" 
                  width="80px" />
      </mj-column>
    </mj-section>

    {{!================= MAIN CONTENT =================}}
    <mj-section padding="0 25px">
      <mj-column>
        <mj-text color="var(--text)" font-size="18px">
          Hello, <strong>{{name}}</strong>!
        </mj-text>

        <mj-text>
          We received a password reset request from:
          <br>
          üìç <strong>{{ipAddress}}</strong> ({{userAgent}})
        </mj-text>

        <mj-divider border-color="var(--border)" padding="20px 0" />

        {{!============= SECURITY ALERT =============}}
        <mj-text css-class="security-alert">
          ‚ö†Ô∏è <strong>Security Notice:</strong> This link expires in 15 minutes and becomes invalid after use.
        </mj-text>

        {{!============= PRIMARY ACTION =============}}
        <mj-button href="{{resetLink}}" 
                   background-color="var(--primary)"
                   color="#ffffff"
                   padding="15px 30px"
                   border-radius="8px"
                   font-weight="bold">
          üîí Reset Your Password
        </mj-button>

        {{!============= FALLBACK URL ==============}}
        <mj-text padding="20px 0 0">
          Trouble with the button? Copy and paste this URL into your browser:
          <code>{{resetLink}}</code>
        </mj-text>
      </mj-column>
    </mj-section>

    {{!================= FOOTER =================}}
    <mj-section padding="40px 0 20px">
      <mj-column>
        <mj-divider border-color="var(--border)" />
        <mj-text font-size="12px" color="var(--footer-text)">
          üõ°Ô∏è <strong>Why am I getting this email?</strong><br>
          This request originated from IP <strong>{{ipAddress}}</strong> at {{#if timestamp}}{{timestamp}}{{else}}an unknown time{{/if}}.<br>
          Didn‚Äôt request this? <a href="{{reportPhishingUrl}}" style="color: var(--danger)">Report suspicious activity</a>.
        </mj-text>
      </mj-column>
    </mj-section>
  </mj-body>
</mjml>
